from PyQt5.QtWidgets import QApplication, QTableWidget, QMessageBox, QTableWidgetItem
from PyQt5.QtSql import QSqlDatabase, QSqlQuery 
import sys

def main():
    app 	= QApplication(sys.argv)
    table 	= QTableWidget()
    db 		= QSqlDatabase.addDatabase("QPSQL")

    table.setWindowTitle("Connect to Mysql Database Example")   

    db.setHostName("93.93.129.62")
    db.setDatabaseName("modern")
    db.setPort(3334)
    db.setUserName("chris")
    db.setPassword("Logitech61thx!")

    if (db.open()==False):
        QMessageBox.critical(None, "Database Error", db.lastError().text())   
    
    query = QSqlQuery ("SELECT * FROM public.ModLab")   
    table.setColumnCount(query.record().count())
    table.setRowCount(query.size())

    index=0
    while (query.next()):
        print(query.value(0))
        table.setItem(index,0,QTableWidgetItem(query.value(0)))
        table.setItem(index,1,QTableWidgetItem(str(query.value(1))))
        table.setItem(index,2,QTableWidgetItem(str(query.value(2))))
        table.setItem(index,3,QTableWidgetItem(str(query.value(3))))
        table.setItem(index,4,QTableWidgetItem(query.value(4).toString()))	
        index = index+1

    table.show()

    return app.exec_()
if __name__ == '__main__':
    main()
