#include <stdio.h>
#include <string.h>

#define MAX_LENGTH 100

int main(void) {
    char termChars[] = " .!?";
    char myString[MAX_LENGTH];
    char termChar;
    int x,i;

    printf("Please enter a sentence: ");
    fgets(myString, MAX_LENGTH, stdin);

    int wordEnd = strlen(myString);

    /* Loop over each character in the sentence, starting from the end */
    /* but skipping the trailing newline */
    for (i=strlen(myString)-2; i>=0; i--) {
        if (i==strlen(myString)-2 && strchr(termChars, myString[i]) > 0) {
            /* Saving the terminal character to print at end */
            termChar = myString[i];
            wordEnd--;
        } else {
            if (myString[i] == ' ' || i == 0) {
                /* If character is a space, we are at the start of a word */
                for (x=i; x<wordEnd; x++) {
                    /* Loop forward over the word */
                    if (myString[x] != ' ') {
                        /* Print the character, excluding spaces */
                        printf("%c", myString[x]);
                    }
                }
                printf(" "); /* Space divider for words */
                wordEnd = i; /* Reset the pointer to end of our next word */
            }
        }
    }
    /* Finally print the terminating character and newline */
    printf("%c\n", termChar);
    return 0;
}
